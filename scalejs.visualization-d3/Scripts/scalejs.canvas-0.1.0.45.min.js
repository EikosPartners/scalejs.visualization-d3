/*! Hammer.JS - v1.0.6 - 2014-01-02
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2014 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */

!function(t,e){function i(){n.READY||(n.event.determineEventTypes(),n.utils.each(n.gestures,function(t){n.detection.register(t)}),n.event.onTouch(n.DOCUMENT,n.EVENT_MOVE,n.detection.detect),n.event.onTouch(n.DOCUMENT,n.EVENT_END,n.detection.detect),n.READY=!0)}var n=function(t,e){return new n.Instance(t,e||{})};n.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},n.HAS_POINTEREVENTS=t.navigator.pointerEnabled||t.navigator.msPointerEnabled,n.HAS_TOUCHEVENTS="ontouchstart"in t,n.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,n.NO_MOUSEEVENTS=n.HAS_TOUCHEVENTS&&t.navigator.userAgent.match(n.MOBILE_REGEX),n.EVENT_TYPES={},n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.POINTER_MOUSE="mouse",n.POINTER_TOUCH="touch",n.POINTER_PEN="pen",n.EVENT_START="start",n.EVENT_MOVE="move",n.EVENT_END="end",n.DOCUMENT=t.document,n.plugins=n.plugins||{},n.gestures=n.gestures||{},n.READY=!1,n.utils={extend:function(t,i,n){for(var s in i)t[s]!==e&&n||(t[s]=i[s]);return t},each:function(t,i,n){var s,o;if("forEach"in t)t.forEach(i,n);else if(t.length!==e){for(s=0,o=t.length;o>s;s++)if(i.call(n,t[s],s,t)===!1)return}else for(s in t)if(t.hasOwnProperty(s)&&i.call(n,t[s],s,t)===!1)return},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],i=[];return n.utils.each(t,function(t){e.push("undefined"!=typeof t.clientX?t.clientX:t.pageX),i.push("undefined"!=typeof t.clientY?t.clientY:t.pageY)}),{pageX:(Math.min.apply(Math,e)+Math.max.apply(Math,e))/2,pageY:(Math.min.apply(Math,i)+Math.max.apply(Math,i))/2}},getVelocity:function(t,e,i){return{x:Math.abs(e/t)||0,y:Math.abs(i/t)||0}},getAngle:function(t,e){var i=e.pageY-t.pageY,n=e.pageX-t.pageX;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){var i=Math.abs(t.pageX-e.pageX),s=Math.abs(t.pageY-e.pageY);return i>=s?t.pageX-e.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:t.pageY-e.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==n.DIRECTION_UP||t==n.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(t,e){e&&t&&t.style&&(n.utils.each(["webkit","khtml","moz","Moz","ms","o",""],function(i){n.utils.each(e,function(e){i&&(e=i+e.substring(0,1).toUpperCase()+e.substring(1)),e in t.style&&(t.style[e]=e)})}),"none"==e.userSelect&&(t.onselectstart=function(){return!1}),"none"==e.userDrag&&(t.ondragstart=function(){return!1}))}},n.Instance=function(t,e){var s=this;return i(),this.element=t,this.enabled=!0,this.options=n.utils.extend(n.utils.extend({},n.defaults),e||{}),this.options.stop_browser_behavior&&n.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),n.event.onTouch(t,n.EVENT_START,function(t){s.enabled&&n.detection.startDetect(s,t)}),this},n.Instance.prototype={on:function(t,e){var i=t.split(" ");return n.utils.each(i,function(t){this.element.addEventListener(t,e,!1)},this),this},off:function(t,e){var i=t.split(" ");return n.utils.each(i,function(t){this.element.removeEventListener(t,e,!1)},this),this},trigger:function(t,e){e||(e={});var i=n.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e;var s=this.element;return n.utils.hasParent(e.target,s)&&(s=e.target),s.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this}};var s=null,o=!1,r=!1;n.event={bindDom:function(t,e,i){var s=e.split(" ");n.utils.each(s,function(e){t.addEventListener(e,i,!1)})},onTouch:function(t,e,i){var a=this;this.bindDom(t,n.EVENT_TYPES[e],function(h){var c=h.type.toLowerCase();if(!c.match(/mouse/)||!r){c.match(/touch/)||c.match(/pointerdown/)||c.match(/mouse/)&&1===h.which?o=!0:c.match(/mouse/)&&!h.which&&(o=!1),c.match(/touch|pointer/)&&(r=!0);var u=0;o&&(n.HAS_POINTEREVENTS&&e!=n.EVENT_END?u=n.PointerEvent.updatePointer(e,h):c.match(/touch/)?u=h.touches.length:r||(u=c.match(/up/)?0:1),u>0&&e==n.EVENT_END?e=n.EVENT_MOVE:u||(e=n.EVENT_END),(u||null===s)&&(s=h),i.call(n.detection,a.collectEventData(t,e,a.getTouchList(s,e),h)),n.HAS_POINTEREVENTS&&e==n.EVENT_END&&(u=n.PointerEvent.updatePointer(e,h))),u||(s=null,o=!1,r=!1,n.PointerEvent.reset())}})},determineEventTypes:function(){var t;t=n.HAS_POINTEREVENTS?n.PointerEvent.getEvents():n.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],n.EVENT_TYPES[n.EVENT_START]=t[0],n.EVENT_TYPES[n.EVENT_MOVE]=t[1],n.EVENT_TYPES[n.EVENT_END]=t[2]},getTouchList:function(t){return n.HAS_POINTEREVENTS?n.PointerEvent.getTouchList():t.touches?t.touches:(t.identifier=1,[t])},collectEventData:function(t,e,i,s){var o=n.POINTER_TOUCH;return(s.type.match(/mouse/)||n.PointerEvent.matchType(n.POINTER_MOUSE,s))&&(o=n.POINTER_MOUSE),{center:n.utils.getCenter(i),timeStamp:(new Date).getTime(),target:s.target,touches:i,eventType:e,pointerType:o,srcEvent:s,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return n.detection.stopDetect()}}}},n.PointerEvent={pointers:{},getTouchList:function(){var t=this,e=[];return n.utils.each(t.pointers,function(t){e.push(t)}),e},updatePointer:function(t,e){return t==n.EVENT_END?this.pointers={}:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e),Object.keys(this.pointers).length},matchType:function(t,e){if(!e.pointerType)return!1;var i=e.pointerType,s={};return s[n.POINTER_MOUSE]=i===e.MSPOINTER_TYPE_MOUSE||i===n.POINTER_MOUSE,s[n.POINTER_TOUCH]=i===e.MSPOINTER_TYPE_TOUCH||i===n.POINTER_TOUCH,s[n.POINTER_PEN]=i===e.MSPOINTER_TYPE_PEN||i===n.POINTER_PEN,s[t]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},n.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:n.utils.extend({},e),lastEvent:!1,name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst.options;return n.utils.each(this.gestures,function(i){return this.stopped||e[i.name]===!1||i.handler.call(i,t,this.current.inst)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=t),t.eventType==n.EVENT_END&&!t.touches.length-1&&this.stopDetect(),t}},stopDetect:function(){this.previous=n.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(t){var e=this.current.startEvent;!e||t.touches.length==e.touches.length&&t.touches!==e.touches||(e.touches=[],n.utils.each(t.touches,function(t){e.touches.push(n.utils.extend({},t))}));var i,s,o=t.timeStamp-e.timeStamp,r=t.center.pageX-e.center.pageX,a=t.center.pageY-e.center.pageY,h=n.utils.getVelocity(o,r,a);return"end"===t.eventType?(i=this.current.lastEvent&&this.current.lastEvent.interimAngle,s=this.current.lastEvent&&this.current.lastEvent.interimDirection):(i=this.current.lastEvent&&n.utils.getAngle(this.current.lastEvent.center,t.center),s=this.current.lastEvent&&n.utils.getDirection(this.current.lastEvent.center,t.center)),n.utils.extend(t,{deltaTime:o,deltaX:r,deltaY:a,velocityX:h.x,velocityY:h.y,distance:n.utils.getDistance(e.center,t.center),angle:n.utils.getAngle(e.center,t.center),interimAngle:i,direction:n.utils.getDirection(e.center,t.center),interimDirection:s,scale:n.utils.getScale(e.touches,t.touches),rotation:n.utils.getRotation(e.touches,t.touches),startEvent:e}),t},register:function(t){var i=t.defaults||{};return i[t.name]===e&&(i[t.name]=!0),n.utils.extend(n.defaults,i,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},n.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(t,e){if(n.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(e.options.drag_max_touches>0&&t.touches.length>e.options.drag_max_touches))switch(t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:if(t.distance<e.options.drag_min_distance&&n.detection.current.name!=this.name)return;if(n.detection.current.name!=this.name&&(n.detection.current.name=this.name,e.options.correct_for_drag_min_distance&&t.distance>0)){var i=Math.abs(e.options.drag_min_distance/t.distance);n.detection.current.startEvent.center.pageX+=t.deltaX*i,n.detection.current.startEvent.center.pageY+=t.deltaY*i,t=n.detection.extendEventData(t)}(n.detection.current.lastEvent.drag_locked_to_axis||e.options.drag_lock_to_axis&&e.options.drag_lock_min_distance<=t.distance)&&(t.drag_locked_to_axis=!0);var s=n.detection.current.lastEvent.direction;t.drag_locked_to_axis&&s!==t.direction&&(t.direction=n.utils.isVertical(s)?t.deltaY<0?n.DIRECTION_UP:n.DIRECTION_DOWN:t.deltaX<0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT),this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),e.trigger(this.name+t.direction,t),(e.options.drag_block_vertical&&n.utils.isVertical(t.direction)||e.options.drag_block_horizontal&&!n.utils.isVertical(t.direction))&&t.preventDefault();break;case n.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},n.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(t,e){switch(t.eventType){case n.EVENT_START:clearTimeout(this.timer),n.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==n.detection.current.name&&e.trigger("hold",t)},e.options.hold_timeout);break;case n.EVENT_MOVE:t.distance>e.options.hold_threshold&&clearTimeout(this.timer);break;case n.EVENT_END:clearTimeout(this.timer)}}},n.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==n.EVENT_END&&e.trigger(this.name,t)}},n.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,e){if(t.eventType==n.EVENT_END){if(e.options.swipe_max_touches>0&&t.touches.length<e.options.swipe_min_touches&&t.touches.length>e.options.swipe_max_touches)return;(t.velocityX>e.options.swipe_velocity||t.velocityY>e.options.swipe_velocity)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},n.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(t,e){if(t.eventType==n.EVENT_END&&"touchcancel"!=t.srcEvent.type){var i=n.detection.previous,s=!1;if(t.deltaTime>e.options.tap_max_touchtime||t.distance>e.options.tap_max_distance)return;i&&"tap"==i.name&&t.timeStamp-i.lastEvent.timeStamp<e.options.doubletap_interval&&t.distance<e.options.doubletap_distance&&(e.trigger("doubletap",t),s=!0),(!s||e.options.tap_always)&&(n.detection.current.name="tap",e.trigger(n.detection.current.name,t))}}},n.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(t,e){return e.options.prevent_mouseevents&&t.pointerType==n.POINTER_MOUSE?void t.stopDetect():(e.options.prevent_default&&t.preventDefault(),void(t.eventType==n.EVENT_START&&e.trigger(this.name,t)))}},n.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(t,e){if(n.detection.current.name!=this.name&&this.triggered)return e.trigger(this.name+"end",t),void(this.triggered=!1);if(!(t.touches.length<2))switch(e.options.transform_always_block&&t.preventDefault(),t.eventType){case n.EVENT_START:this.triggered=!1;break;case n.EVENT_MOVE:var i=Math.abs(1-t.scale),s=Math.abs(t.rotation);if(i<e.options.transform_min_scale&&s<e.options.transform_min_rotation)return;n.detection.current.name=this.name,this.triggered||(e.trigger(this.name+"start",t),this.triggered=!0),e.trigger(this.name,t),s>e.options.transform_min_rotation&&e.trigger("rotate",t),i>e.options.transform_min_scale&&(e.trigger("pinch",t),e.trigger("pinch"+(t.scale<1?"in":"out"),t));break;case n.EVENT_END:this.triggered&&e.trigger(this.name+"end",t),this.triggered=!1}}},n.plugins.fakeMultitouch=function(){var t=!1;n.HAS_POINTEREVENTS=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>=1,n.event.getTouchList=function(e,i){if(n.HAS_POINTEREVENTS)return n.PointerEvent.getTouchList();if(e.touches)return e.touches;if(i==n.EVENT_START&&(t=!1),e.shiftKey){t||(t={pageX:e.pageX,pageY:e.pageY});var s=t.pageX-e.pageX,o=t.pageY-e.pageY;return[{identifier:1,pageX:t.pageX-s-50,pageY:t.pageY-o+50,target:e.target},{identifier:2,pageX:t.pageX+s+50,pageY:t.pageY+o-50,target:e.target}]}return t=!1,[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]}},n.plugins.showTouches=function(t){function e(){for(var t in s)s.hasOwnProperty(t)&&!o[t]&&(document.body.removeChild(s[t]),delete s[t])}var i="position:absolute;z-index:9999;left:0;top:0;height:14px;width:14px;border:solid 2px #777;background:rgba(255,255,255,.7);border-radius:20px;pointer-events:none;margin-top:-9px;margin-left:-9px;",s={},o={};n.detection.register({name:"show_touches",priority:0,handler:function(r){if(o={},r.pointerType!=n.POINTER_MOUSE&&!t)return void e();for(var a=0,h=r.touches.length;h>a;a++){var c=r.touches[a],u=c.identifier;if(o[u]=c,!s[u]){var l=document.createElement("div");l.setAttribute("style",i),document.body.appendChild(l),s[u]=l}s[u].style.left=c.pageX+"px",s[u].style.top=c.pageY+"px"}e()}})},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("hammer",[],function(){return n}):"object"==typeof module&&"object"==typeof module.exports?module.exports=n:t.Hammer=n}(this),define("scalejs.canvas/utils",[],function(){var t={left:function(){return 0},top:function(){return 0},center:function(t){return-t/2},right:function(t){return-t},bottom:function(t){return-t}},e={left:function(t){return t},top:function(t){return t},center:function(t,e){return t-e/2},right:function(t,e){return t-e},bottom:function(t,e){return t-e}};return{getOffset:t,applyOffset:e}}),define("scalejs.canvas/group",["./utils"],function(t){return function(e){function i(t){this.type="group",this.className="group",this.parent=t.parent||e,this.id=t.id||t.parent.children.length,this.data=t.data||{},this.fontFamily=t.fontFamily||"",this.fontSize=t.fontSize||0,this.originX=t.originX||"left",this.originY=t.originY||"top",this.left=t.left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0,this.angle=t.angle||0,this.scaleX=t.scaleX||1,this.scaleY=t.scaleY||1,this.backFill=t.backFill||"",this.opacity=t.opacity||1,this.offset={left:0,top:0},this.pos={left:0,top:0},this.extents={left:0,top:0,right:0,bottom:0},this.children=[]}return i.prototype.getExtents=function(){return this.extents},i.prototype.calcBounds=function(){if(this.fontFamily&&this.fontSize)if(this.font=this.fontSize+"px "+this.fontFamily,this.font!==e.curFont){var i=e.curFont;e.context.font=this.font,e.curFont=this.font,e.curFontSize=this.fontSize,this.children.forEach(function(t){t.calcBounds()}),this.curFont=i,e.context.restore()}else this.children.forEach(function(t){t.calcBounds()});else this.font=void 0,this.children.forEach(function(t){t.calcBounds()});if(this.children.length>0){var n,s=this.children[0].extents;for(this.extents.left=s.left,this.extents.top=s.top,this.extents.right=s.right,this.extents.bottom=s.bottom,n=1;n<this.children.length;n+=1)s=this.children[n].extents,s.left<this.extents.left&&(this.extents.left=s.left),s.top<this.extents.top&&(this.extents.top=s.top),s.right>this.extents.right&&(this.extents.right=s.right),s.bottom>this.extents.bottom&&(this.extents.bottom=s.bottom)}else this.extents.left=0,this.extents.top=0,this.extents.right=0,this.extents.bottom=0;this.offset.left=t.getOffset[this.originX](this.width),this.offset.top=t.getOffset[this.originY](this.height),this.pos.left=this.left+this.offset.left,this.pos.top=this.top+this.offset.top,this.radianAngle=this.angle*Math.PI/180},i.prototype.render=function(){if(this.opacity>0){if(e.context.save(),this.opacity<1&&(e.context.globalAlpha*=this.opacity),e.context.translate(this.pos.left,this.pos.top),e.context.scale(this.scaleX,this.scaleY),e.context.rotate(this.radianAngle),this.backFill&&this.width>0&&this.height>0&&(e.context.fillStyle=this.backFill,e.context.fillRect(0,0,this.width,this.height)),this.font&&this.font!==e.curFont){var t=e.curFont,i=e.curFontSize;e.context.font=this.font,e.curFont=this.font,e.curFontSize=this.fontSize,this.children.forEach(function(t){t.render()}),e.curFont=t,e.curFontSize=i}else this.children.forEach(function(t){t.render()});e.context.restore()}},i.prototype.isPointIn=function(t,e,i){t-=this.pos.left,e-=this.pos.top,t/=this.scaleX,e/=this.scaleY;var n=Math.sin(-this.radianAngle),s=Math.cos(-this.radianAngle),o=t;return t=t*s-e*n,e=o*n+e*s,this.backFill?t>=0&&e>=0&&t<=this.width&&e<=this.height:this.children.some(function(n){return n.isPointIn(t,e,i)})},i.prototype.mouseDownEvent=function(t,i,n){e.context.save(),t-=this.pos.left,i-=this.pos.top,t/=this.scaleX,i/=this.scaleY;var s=Math.sin(-this.radianAngle),o=Math.cos(-this.radianAngle),r=t;t=t*o-i*s,i=r*s+i*o,this.children.forEach(function(e){e.isPointIn(t,i,n)&&e.mouseDownEvent.call(e,t,i,n)}),this.onmousedown&&this.onmousedown.call(this,this.data.data),e.context.restore()},i.prototype.remove=function(){this.parent.children.splice(this.parent.children.indexOf(this),1)},i}}),define("scalejs.canvas/rect",["./utils"],function(t){return function(e){function i(t){this.type="obj",this.className="rect",this.parent=t.parent||e,this.id=t.id||t.parent.children.length,this.data=t.data||{},this.originX=t.originX||"left",this.originY=t.originY||"top",this.left=t.left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0,this.fill=t.fill||"#000",this.offset={left:0,top:0},this.pos={left:0,top:0},this.extents={left:0,top:0,right:0,bottom:0}}return i.prototype.getExtents=function(){return this.extents},i.prototype.calcBounds=function(){this.offset.left=t.getOffset[this.originX](this.width),this.offset.top=t.getOffset[this.originY](this.height),this.pos.left=this.left+this.offset.left,this.pos.top=this.top+this.offset.top,this.extents.left=this.pos.left,this.extents.top=this.pos.top,this.extents.right=this.pos.left+this.width,this.extents.bottom=this.pos.top+this.height},i.prototype.render=function(){this.width>0&&this.height>0&&(e.context.fillStyle=this.fill,e.context.fillRect(this.pos.left,this.pos.top,this.width,this.height))},i.prototype.isPointIn=function(t,e){return t>=this.extents.left&&e>=this.extents.top&&t<=this.extents.right&&e<=this.extents.bottom},i.prototype.mouseDownEvent=function(){this.onmousedown&&this.onmousedown.call(this,this.data.data)},i.prototype.remove=function(){this.parent.children.splice(this.parent.children.indexOf(this),1)},i}}),define("scalejs.canvas/text",["./utils"],function(t){return function(e){function i(t){this.type="obj",this.className="text",this.parent=t.parent||e,this.id=t.id||t.parent.children.length,this.data=t.data||{},this.fontFamily=t.fontFamily||"",this.fontSize=t.fontSize||0,this.text=t.text||"",this.originX=t.originX||"left",this.originY=t.originY||"top",this.left=t.left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0,this.angle=t.angle||0,this.fill=t.fill||"#000",this.opacity=t.opacity||1,this.offset={left:0,top:0},this.pos={left:0,top:0},this.extents={left:0,top:0,right:0,bottom:0}}return i.prototype.setText=function(t){this.fontFamily&&this.fontSize?(this.font=this.fontSize+"px "+this.fontFamily,this.height=this.fontSize):(this.font=void 0,this.height=e.curFontSize),!this.font||this.font===this.calcFont&&this.calcText===this.text?this.font||e.curFont===this.calcFont&&this.calcText===this.text||(this.text=t,this.width=e.context.measureText(t||"").width,this.calcText=this.text,this.calcFont=e.curFont):(e.context.save(),e.context.font=this.font,this.text=t,this.width=e.context.measureText(t||"").width,e.context.restore(),this.calcText=this.text,this.calcFont=this.font)},i.prototype.getExtents=function(){return this.extents},i.prototype.calcBounds=function(){this.setText(this.text),this.offset.left=t.getOffset[this.originX](this.width),this.offset.top=t.getOffset[this.originY](this.height)+this.height,this.pos.left=this.left+this.offset.left,this.pos.top=this.top+this.offset.top,this.extents.left=this.pos.left,this.extents.right=this.pos.left,this.extents.top=this.pos.top+this.width,this.extents.bottom=this.pos.top+this.height},i.prototype.render=function(){this.opacity>0&&this.text.length>0&&(e.context.save(),this.font&&this.font!==e.curFont&&(e.context.font=this.font),this.fill&&(e.context.fillStyle=this.fill),this.opacity<1&&(e.context.globalAlpha*=this.opacity),e.context.translate(this.left,this.top),this.angle&&e.context.rotate(this.angle*Math.PI/180),e.context.fillText(this.text,this.offset.left,this.offset.top),e.context.restore())},i.prototype.isPointIn=function(t,e){return t>=this.extents.left&&e>=this.extents.top&&t<=this.extents.right&&e<=this.extents.bottom},i.prototype.mouseDownEvent=function(){this.onmousedown&&this.onmousedown.call(this,this.data.data)},i.prototype.remove=function(){this.parent.children.splice(this.parent.children.indexOf(this),1)},i}}),define("scalejs.canvas/arc",["./utils"],function(){var t=.5*Math.PI;return function(e){function i(t){this.type="obj",this.className="arc",this.parent=t.parent||e,this.id=t.id||t.parent.children.length,this.data=t.data||{},this.originX=t.originX||"center",this.originY=t.originY||"center",this.left=t.left||0,this.top=t.top||0,this.width=t.width||0,this.height=t.height||0,this.radius=0,this.innerRadius=t.innerRadius||0,this.outerRadius=t.outerRadius||0,this.thickness=0,this.startAngle=t.startAngle||0,this.endAngle=t.endAngle||0,this.fill=t.fill||"#000",this.opacity=t.opacity||1,this.offset={left:0,top:0},this.pos={left:0,top:0},this.extents={left:0,top:0,right:0,bottom:0}}return i.prototype.getExtents=function(){return this.extents},i.prototype.calcBounds=function(){this.width=this.height=2*this.outerRadius,this.offset.left=this.left,this.offset.top=this.top,this.extents.left=this.offset.left-this.outerRadius,this.extents.right=this.offset.left+this.outerRadius,this.extents.top=this.offset.top-this.outerRadius,this.extents.bottom=this.offset.top+this.outerRadius,this.thickness=this.outerRadius-this.innerRadius,this.radius=this.thickness/2+this.innerRadius},i.prototype.render=function(){this.opacity>0&&0!==this.thickness&&this.endAngle!==this.startAngle&&(e.context.beginPath(),this.fill&&(e.context.strokeStyle=this.fill),this.opacity<1&&(e.context.globalAlpha*=this.opacity),e.context.lineWidth=this.thickness,e.context.arc(this.offset.left,this.offset.top,this.radius,this.startAngle-t,this.endAngle-t),e.context.stroke())},i.prototype.isPointIn=function(e,i){var n=(e-this.offset.left)*(e-this.offset.left)+(i-this.offset.top)*(i-this.offset.top),s=Math.atan2(i-this.offset.top,e-this.offset.left)+t;return 0>s&&(s+=2*Math.PI),n<=this.outerRadius*this.outerRadius&&n>=this.innerRadius*this.innerRadius&&s>=this.startAngle&&s<=this.endAngle},i.prototype.mouseDownEvent=function(){this.onmousedown&&this.onmousedown.call(this,this.data.data)},i.prototype.remove=function(){this.parent.children.splice(this.parent.children.indexOf(this),1)},i}}),define("scalejs.canvas/selector",["./group","./rect","./text","./arc"],function(t,e,i,n){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return function o(r){function a(t){this.isTransition=t.isTransition||!1,this.durationTime=t.durationTime||250,this.easeFunc=t.easeFunc||function(t){return t},this.endFunc=void 0,this.object=t.object||r,this.objects=t.objects||[],this.enterObjects=t.enterObjects||[],this.updateObjects=t.updateObjects||[],this.exitObjects=t.exitObjects||[]}var o,h={group:t(r),rect:e(r),text:i(r),arc:n(r)};return a.prototype.select=function(t){var e=[];return this.objects.forEach(function(i){void 0!==i.children&&i.children.length>0&&i.children.some(function(i){return i.className===t?(e.push(i),!0):!1})}),new a({isTransition:this.isTransition,durationTime:this.durationTime,easeFunc:this.easeFunc,object:e.length>0?e[0].parent:this.objects.length>0?this.objects[0]:this.object,objects:e})},a.prototype.selectAll=function(t){var e=[];return this.objects.forEach(function(i){void 0!==i.children&&i.children.length>0&&i.children.forEach(function(i){i.className===t&&e.push(i)})}),new a({isTransition:this.isTransition,durationTime:this.durationTime,easeFunc:this.easeFunc,object:e.length>0?e[0].parent:this.objects.length>0?this.objects[0]:this.object,objects:e})},a.prototype.filter=function(t){var e=[];return this.objects.forEach(function(i){t.call(i,i.data.data)&&e.push(i)}),new a({isTransition:this.isTransition,durationTime:this.durationTime,easeFunc:this.easeFunc,object:e.length>0?e[0].parent:this.objects.length>0?this.objects[0]:this.object,objects:e})},a.prototype.data=function(t,e){var i={};return t=t.map(function(t){var n=e(t);return t={id:n,data:t},i[n]=t,t}),this.exitObjects=[],this.objects=this.objects.filter(function(t){return i[t.data.id]?(t.data.data=i[t.data.id].data,i[t.data.id]=void 0,!0):(this.exitObjects.push(t),!1)},this),this.enterObjects=t.filter(function(t){return i[t.id]}),this},a.prototype.enter=function(){return{parentSelector:this,append:function(t,e){return e=e||{},new a({isTransition:this.parentSelector.isTransition,durationTime:this.parentSelector.durationTime,easeFunc:this.parentSelector.easeFunc,objects:this.parentSelector.enterObjects.map(function(i){e.parent=this.parentSelector.object,e.data=i;var n=new h[t](e);return this.parentSelector.object.children.push(n),n},this)})}}},a.prototype.update=function(){var t=new a(this);return t.objects=this.updateObjects,t},a.prototype.exit=function(){var t=new a(this);return t.objects=this.exitObjects,t},a.prototype.on=function(t,e){return t="on"+t,this.objects.forEach(function(i){i[t]=e}),this},a.prototype.append=function(t,e){e=e||{};var i=new a(this);return i.objects=this.objects.map(function(i){e.parent=i,e.data=i.data;var n=new h[t](e);return i.children.push(n),n}),i},a.prototype.remove=function(){return this.objects.forEach(function(t){t.parent.children.splice(t.parent.children.indexOf(t),1)}),this.objects=[],this},a.prototype.attr=function(t,e){return this.objects.forEach(function(i){var n=e;"function"==typeof n&&(n=n(attrFunc.call(i,i.data.data))),"function"==typeof i["set"+t]?i["set"+t](n):i[t]=n}),this},a.prototype.sort=function(t){return this.objects.sort(function(e,i){return t(e.data.data,i.data.data)}),this},a.prototype.order=function(){return this.objects.forEach(function(t){t.parent.children.splice(t.parent.children.indexOf(t),1),t.parent.children.push(t)}),this},a.prototype.each=function(t,e){return void 0===e||"start"===e?this.objects.forEach(function(e){t.call(e,e.data.data)}):"end"===e&&this.objects.forEach(function(e){e.tweenEndFunc=t}),this},a.prototype.transition=function(){var t=new a(this);return t.isTransition=!0,t.objects.forEach(function(t){t.tweenEndFunc=void 0}),t},a.prototype.duration=function(t){return this.durationTime=t,this},a.prototype.ease=function(t){return this.easeFunc=t,this},a.prototype.tween=function(t,e){var i=(new Date).getTime(),n=i+this.durationTime;return this.objects.forEach(function(t){t.animationIndex>=0||(t.animationIndex=r.animations.length,r.animations[t.animationIndex]=t),t.tweenFunc=e.call(t,t.data.data),t.easeFunc=this.easeFunc,t.timeStart=i,t.timeEnd=n,t.duration=this.durationTime},this),void 0===r.requestFrameID&&r.animations.length>0&&(r.requestFrameID=s(function(){r.onAnimationFrame()})),this},a.prototype.startRender=function(){},a.prototype.pumpRender=function(){return r.pumpRender(),o},o=new a({objects:[r]}),o[0]=[r.element],o}}),define("scalejs.canvas/canvas",["hammer","./selector"],function(t,e){function i(t){this.type="canvas",this.className="canvas",this.element=t,this.context=t.getContext("2d"),this.parent=this,this.children=[],this.animations=[],this.requestFrameID=void 0,this.curFont="",this.curFontSize=0}function n(n){function s(t){if(t.gesture&&(t.gesture.preventDefault(),1===t.gesture.touches.length)){var e,i=t.gesture.touches[0],n=i.target.style.display;i.target.style.display="",e=i.target.getBoundingClientRect(),i.target.style.display=n,t.offsetX=i.pageX-e.left,t.offsetY=i.pageY-e.top,o.context.save(),o.context.setTransform(1,0,0,1,0,0),o.children.forEach(function(e){e.isPointIn(t.offsetX,t.offsetY)&&e.mouseDownEvent.call(e,t.offsetX,t.offsetY,t)}),o.context.restore()}}var o=new i(n),r=t(o.element,{prevent_default:!0});return r.on("click tap",s),e(o)}var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};return i.prototype.setwidth=function(t){this.element.width=t},i.prototype.setheight=function(t){this.element.height=t},i.prototype.onAnimationFrame=function(){if(this.animations.length<=0)return void(this.requestFrameID=void 0);var t=this;this.requestFrameID=s(function(){t.onAnimationFrame()});var e=(new Date).getTime();this.animations=this.animations.filter(function(t){var i=Math.min((e-t.timeStart)/t.duration,1);return t.tweenFunc.call(t,t.easeFunc(i)),e>=t.timeEnd&&(t.animationIndex=void 0,t.tweenEndFunc&&t.tweenEndFunc.call(t,t.data.data)),e<t.timeEnd}),this.animations.forEach(function(t,e){t.animationIndex=e}),this.pumpRender()},i.prototype.pumpRender=function(){this.context.setTransform(1,0,0,1,0,0),this.context.font="40px Times New Roman",this.curFont="40px Times New Roman",this.curFontSize=40,this.children.forEach(function(t){t.calcBounds()}),this.context.clearRect(0,0,this.element.width,this.element.height),this.children.forEach(function(t){t.render()})},i.prototype.startRender=function(){},i.prototype.render=function(){this.pumpRender()},{select:n}}),define("scalejs.canvas",["scalejs!core","./scalejs.canvas/canvas"],function(t,e){return t.registerExtension({canvas:e}),e});